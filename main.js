!function(){"use strict";var e=class{constructor(e,t){!function(e,t,s){t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s}(this,"_hasInvalidInput",(()=>this._inputList.some((e=>!e.validity.valid)))),this._inputSelector=e.inputSelector,this._fieldsetSelector=e.fieldsetSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t,this._inputList=Array.from(this._form.querySelectorAll(this._inputSelector)),this._submitButton=this._form.querySelector(this._submitButtonSelector)}disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}enableButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}resetErrors(){this._inputList.forEach((e=>{this._hideInputError(e)}))}_toggleButtonState(){this._hasInvalidInput()?this.disableButton():this.enableButton()}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}_showInputError(e,t){const s=this._form.querySelector(".".concat(e.id,"-error"));e.classList.add(this._inputErrorClass),s.textContent=t,s.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),t.textContent=""}_setEventListeners(){this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}enableValidation(){this._setEventListeners()}};function t(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var s=class{constructor(e){t(this,"_handleClickClose",(e=>{e.target.classList.contains("popup-box")&&this.close()})),t(this,"_handleEscClose",(e=>{"Escape"===e.key&&this.close()})),this._popup=document.querySelector(e),this._closeButton=this._popup.querySelector(".popup-box__close-btn")}open(){this._popup.classList.add("popup-box_opened"),this._popup.addEventListener("mousedown",this._handleClickClose),document.addEventListener("keydown",this._handleEscClose)}close(){this._popup.classList.remove("popup-box_opened"),this._popup.removeEventListener("mousedown",this._handleClickClose),document.removeEventListener("keydown",this._handleEscClose)}setEventListeners(){this._closeButton.addEventListener("click",(()=>this.close()))}},r=class extends s{constructor(e){let{popupSelector:t,submitHandler:s}=e;super(t),this.submitHandler=s,this._form=this._popup.querySelector(".form"),this._inputList=Array.from(this._form.querySelectorAll(".form__input")),this._submitButton=this._popup.querySelector(".form__save-btn"),this._submitButtonText=this._submitButton.textContent}_getInputValues(){const e={};return this._inputList.forEach((t=>{e[t.name]=t.value})),e}setInputValues(e){this._inputList.forEach((t=>{t.value=e[t.name]}))}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>{e.preventDefault(),this.submitHandler(this._getInputValues()),this.close()}))}close(){super.close(),this._form.reset()}renderLoading(e){this._submitButton.textContent=e?"Saving...":this._submitButtonText}};const n=new class{constructor(e){let{baseUrl:t,headers:s}=e;this._baseUrl=t,this._headers=s}_fetchResponse(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}getInitialCards(){return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers}).then(this._fetchResponse)}getUserInfo(){return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers}).then(this._fetchResponse)}updateUserInfo(e,t){return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e,about:t})}).then(this._processResponse)}uploadCard(e){let{name:t,link:s}=e;return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:s})}).then(this._fetchResponse)}likeCard(e){return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"PUT",headers:this._headers}).then(this._fetchResponse)}unLikeCard(e){return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"DELETE",headers:this._headers}).then(this._fetchResponse)}updateAvatar(e){return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then(this._fetchResponse)}deleteCard(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then((e=>e.ok?e.json():Promise.reject("Error: ".concat(e.status))))}}({baseUrl:"https://around.nomoreparties.co/v1/cohort-3-en",headers:{authorization:"0b69bf19-42d1-4bf8-9ff1-9675ed788767","Content-Type":"application/json"}}),i=document.querySelector(".form__input_type_name"),o=document.querySelector(".form__input_type_job"),a=document.querySelector(".profile__edit-btn"),l=document.querySelector(".profile__add-btn"),c=document.querySelector(".form-edit"),u=document.querySelector(".form-add"),h=document.querySelector(".form-avatar"),_=document.querySelector(".profile__edit-picture"),d={inputSelector:".form__input",fieldsetSelector:".form__set",submitButtonSelector:".form__save-btn",inactiveButtonClass:"form__save-btn_disabled",inputErrorClass:"form__input_type_error",errorClass:"popup__error_visible"},p=new class{constructor(e){let{userNameSelector:t,userJobSelector:s,avatarSelector:r}=e;this._profileName=document.querySelector(t),this._profileJob=document.querySelector(s),this._avatar=document.querySelector(r)}getUserInfo(){return{name:this._profileName.textContent,job:this._profileJob.textContent,avatar:this._avatar.src,id:this._userId}}setUserInfo(e,t,s){this._profileName.textContent=e,this._profileJob.textContent=t,this._userId=s}setAvatar(e){this._avatar.src=e}}({userNameSelector:".profile__name",userJobSelector:".profile__job",avatarSelector:".profile__avatar"}),m=new class{constructor(e,t){let{renderer:s}=e;this._renderer=s,this._container=document.querySelector(t)}appendItem(e){this._container.append(e)}prependItem(e){this._container.prepend(e)}renderItems(e){e.forEach((e=>{this._renderer(e)}))}}({renderer:e=>{m.appendItem(E(e))}},".elements"),b=new r({popupSelector:".popup-box_edit",submitHandler:e=>{const t=p.getUserInfo(),s={name:t.name,"about-me":t.job};b.setInputValues(s),b.renderLoading(!0),n.updateUserInfo(e.name,e.job).then((()=>{p.setUserInfo(e.name,e.job)})).catch(console.log).finally((()=>{b.renderLoading(!1)}))}}),f=new r({popupSelector:".popup-box_add",submitHandler:e=>{f.renderLoading(!0);const t={name:e.title,link:e["image-link"]};n.uploadCard(t).then((e=>{const t=document.querySelector(".elements"),s=E(e);t.prepend(s)})).catch(console.log).finally((()=>{f.renderLoading(!1)}))}}),v=new class extends s{constructor(e){super(e)}open(e,t){const s=this._popup.querySelector(".popup-box__image"),r=this._popup.querySelector(".popup-box__caption");super.open(),s.alt=e,s.src=t,r.textContent=e}}(".popup-box_image"),L=new class extends s{constructor(e,t){super(e),this._submitHandler=t,this._submitButton=this._popup.querySelector(".form__save-btn"),this._submitButtonText=this._submitButton.textContent}setAction(e){this._submitHandler=e}setEventListeners(){this._popup.addEventListener("submit",(e=>{e.preventDefault(),this._submitHandler(),this.close()})),super.setEventListeners()}renderLoading(e){this._submitButton.textContent=e?"Saving...":this._submitButtonText}}(".popup-box_delete"),k=new r({popupSelector:".popup-box_avatar",submitHandler:e=>{k.renderLoading(!0),n.updateAvatar(e.avatar).then((e=>{p.setAvatar(e.avatar)})).catch(console.log).finally((()=>{k.renderLoading(!1)}))}});b.setEventListeners(),f.setEventListeners(),v.setEventListeners(),k.setEventListeners(),L.setEventListeners();const S=new e(d,c);S.enableValidation();const y=new e(d,u);y.enableValidation();const C=new e(d,h);function E(e){const t=p.getUserInfo().id,s=new class{constructor(e,t,s,r,n,i){var o,a;a=()=>this._like.classList.toggle("element__like_active"),(o="_toggleLike")in this?Object.defineProperty(this,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):this[o]=a,this._title=e.name,this._image=e.link,this._data=e,this._userId=s,this._cardSelector=t,this._handleCardClick=r,this._handleDeleteButton=n,this._handleLikeClick=i,this._likes=this._data.likes}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".element").cloneNode(!0)}generateCard(){this._element=this._getTemplate(),this._like=this._element.querySelector(".element__like"),this._deleteBtn=this._element.querySelector(".element__delete-icon "),this._likeButton=this._element.querySelector(".element__like"),this._likeCounter=this._element.querySelector(".element__like_number"),this._setEventListeners();const e=this._element.querySelector(".element__image"),t=this._element.querySelector(".element__paragraph");return this._renderLikes(),e.src=this._image,t.textContent=this._title,e.alt=this._title,this._data.owner._id!==this._userId&&(this._deleteBtn.removeEventListener("click",this._handleDeleteButton),this._deleteBtn.style="display: none"),this._element}removeCard(){this._element.remove()}_renderLikes(){this._likeCounter.textContent=this._likes.length,this.isLiked()?this._likeButton.classList.add("element__like_active"):this._likeButton.classList.remove("element__like_active")}updateLikes(e){this._likes=e,this._renderLikes()}isLiked(){return this._likes.map((e=>e._id)).find((e=>e===this._userId))}_setEventListeners(){this._like.addEventListener("click",this._handleLikeClick),this._deleteBtn.addEventListener("click",this._handleDeleteButton),this._element.querySelector(".element__image").addEventListener("click",this._handleCardClick)}}(e,"#template-element",t,(()=>{v.open(e.name,e.link)}),(()=>{L.open(),L.setAction((()=>{L.renderLoading(!0),n.deleteCard(e._id).then((()=>{s.removeCard()})).catch(console.log).finally((()=>{L.renderLoading(!1)}))}))}),(()=>{s.isLiked()?n.unLikeCard(e._id).then((e=>{s.updateLikes(e.likes)})).catch(console.log):n.likeCard(e._id).then((e=>{s.updateLikes(e.likes)})).catch(console.log)}));return s.generateCard()}C.enableValidation(),Promise.all([n.getUserInfo(),n.getInitialCards()]).then((e=>{let[t,s]=e;p.setUserInfo(t.name,t.about,t._id),p.setAvatar(t.avatar),m.renderItems(s)})).catch(console.log),a.addEventListener("click",(function(){b.open();const e=p.getUserInfo();i.value=e.name,o.value=e.job,S.resetErrors(),S.enableButton()})),l.addEventListener("click",(function(){f.open(),y.disableButton(),y.resetErrors()})),_.addEventListener("click",(()=>{k.open(),C.disableButton(),C.resetErrors()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoieUJBNEZBLElDWEEsRUFqRkEsTUFDRUEsWUFBWUMsRUFBS0MsSSw2R0FBTSwwQkFjSixJQUNWQyxLQUFLQyxXQUFXQyxNQUFNQyxJQUNuQkEsRUFBYUMsU0FBU0MsVUFmaENMLEtBQUtNLGVBQWlCUixFQUFJUyxjQUMxQlAsS0FBS1Esa0JBQW9CVixFQUFJVyxpQkFDN0JULEtBQUtVLHNCQUF3QlosRUFBSWEscUJBQ2pDWCxLQUFLWSxxQkFBdUJkLEVBQUllLG9CQUNoQ2IsS0FBS2MsaUJBQW1CaEIsRUFBSWlCLGdCQUM1QmYsS0FBS2dCLFlBQWNsQixFQUFJbUIsV0FDdkJqQixLQUFLa0IsTUFBUW5CLEVBQ2JDLEtBQUtDLFdBQWFrQixNQUFNQyxLQUN0QnBCLEtBQUtrQixNQUFNRyxpQkFBaUJyQixLQUFLTSxpQkFFbkNOLEtBQUtzQixjQUFnQnRCLEtBQUtrQixNQUFNSyxjQUFjdkIsS0FBS1UsdUJBU3JEYyxnQkFDRXhCLEtBQUtzQixjQUFjRyxVQUFVQyxJQUFJMUIsS0FBS1ksc0JBQ3RDWixLQUFLc0IsY0FBY0ssVUFBVyxFQUdoQ0MsZUFDRTVCLEtBQUtzQixjQUFjRyxVQUFVSSxPQUFPN0IsS0FBS1ksc0JBQ3pDWixLQUFLc0IsY0FBY0ssVUFBVyxFQUdoQ0csY0FDRTlCLEtBQUtDLFdBQVc4QixTQUFTQyxJQUN2QmhDLEtBQUtpQyxnQkFBZ0JELE1BSXpCRSxxQkFDTWxDLEtBQUttQyxtQkFDUG5DLEtBQUt3QixnQkFFTHhCLEtBQUs0QixlQUlUUSxvQkFBb0JqQyxHQUNiQSxFQUFhQyxTQUFTQyxNQUd6QkwsS0FBS2lDLGdCQUFnQjlCLEdBRnJCSCxLQUFLcUMsZ0JBQWdCbEMsRUFBY0EsRUFBYW1DLG1CQU1wREQsZ0JBQWdCbEMsRUFBY29DLEdBQzVCLE1BQU1DLEVBQWV4QyxLQUFLa0IsTUFBTUssY0FBWCxXQUE2QnBCLEVBQWFzQyxHQUExQyxXQUNyQnRDLEVBQWFzQixVQUFVQyxJQUFJMUIsS0FBS2Msa0JBQ2hDMEIsRUFBYUUsWUFBY0gsRUFDM0JDLEVBQWFmLFVBQVVDLElBQUkxQixLQUFLZ0IsYUFHbENpQixnQkFBZ0I5QixHQUNkLE1BQU1xQyxFQUFleEMsS0FBS2tCLE1BQU1LLGNBQVgsV0FBNkJwQixFQUFhc0MsR0FBMUMsV0FDckJ0QyxFQUFhc0IsVUFBVUksT0FBTzdCLEtBQUtjLGtCQUNuQzBCLEVBQWFmLFVBQVVJLE9BQU83QixLQUFLZ0IsYUFDbkN3QixFQUFhRSxZQUFjLEdBRzdCQyxxQkFDRTNDLEtBQUtDLFdBQVc4QixTQUFTNUIsSUFDdkJBLEVBQWF5QyxpQkFBaUIsU0FBUyxLQUNyQzVDLEtBQUtvQyxvQkFBb0JqQyxHQUN6QkgsS0FBS2tDLDJCQUtYVyxtQkFDRTdDLEtBQUsyQyx1Qix3SEMxQ1QsTUFuQ0EsTUFDRTlDLFlBQVlpRCxHQUFlLDRCQWlCTkMsSUFDZkEsRUFBRUMsT0FBT3ZCLFVBQVV3QixTQUFTLGNBQzlCakQsS0FBS2tELFdBbkJrQiwwQkF1QlJILElBQ0gsV0FBVkEsRUFBRUksS0FDSm5ELEtBQUtrRCxXQXhCUGxELEtBQUtvRCxPQUFTQyxTQUFTOUIsY0FBY3VCLEdBQ3JDOUMsS0FBS3NELGFBQWV0RCxLQUFLb0QsT0FBTzdCLGNBQWMseUJBR2hEZ0MsT0FDRXZELEtBQUtvRCxPQUFPM0IsVUFBVUMsSUFBSSxvQkFDMUIxQixLQUFLb0QsT0FBT1IsaUJBQWlCLFlBQWE1QyxLQUFLd0QsbUJBQy9DSCxTQUFTVCxpQkFBaUIsVUFBVzVDLEtBQUt5RCxpQkFHNUNQLFFBQ0VsRCxLQUFLb0QsT0FBTzNCLFVBQVVJLE9BQU8sb0JBQzdCN0IsS0FBS29ELE9BQU9NLG9CQUFvQixZQUFhMUQsS0FBS3dELG1CQUNsREgsU0FBU0ssb0JBQW9CLFVBQVcxRCxLQUFLeUQsaUJBZS9DRSxvQkFDRTNELEtBQUtzRCxhQUFhVixpQkFBaUIsU0FBUyxJQUFNNUMsS0FBS2tELFlDaUIzRCxFQTlDQSxjQUE0QlUsRUFDMUIvRCxZQUFZLEdBQWtDLElBQWxDLGNBQUVpRCxFQUFGLGNBQWlCZSxHQUFpQixFQUM1Q0MsTUFBTWhCLEdBQ045QyxLQUFLNkQsY0FBZ0JBLEVBQ3JCN0QsS0FBS2tCLE1BQVFsQixLQUFLb0QsT0FBTzdCLGNBQWMsU0FDdkN2QixLQUFLQyxXQUFha0IsTUFBTUMsS0FBS3BCLEtBQUtrQixNQUFNRyxpQkFBaUIsaUJBQ3pEckIsS0FBS3NCLGNBQWdCdEIsS0FBS29ELE9BQU83QixjQUFjLG1CQUMvQ3ZCLEtBQUsrRCxrQkFBb0IvRCxLQUFLc0IsY0FBY29CLFlBRzlDc0Isa0JBQ0UsTUFBTUMsRUFBZSxHQUtyQixPQUpBakUsS0FBS0MsV0FBVzhCLFNBQVNDLElBQ3ZCaUMsRUFBYWpDLEVBQU1rQyxNQUFRbEMsRUFBTW1DLFNBRzVCRixFQUdURyxlQUFlQyxHQUNickUsS0FBS0MsV0FBVzhCLFNBQVNDLElBQ3ZCQSxFQUFNbUMsTUFBUUUsRUFBS3JDLEVBQU1rQyxTQUk3QlAsb0JBQ0VHLE1BQU1ILG9CQUNOM0QsS0FBS2tCLE1BQU0wQixpQkFBaUIsVUFBV0csSUFDckNBLEVBQUV1QixpQkFDRnRFLEtBQUs2RCxjQUFjN0QsS0FBS2dFLG1CQUN4QmhFLEtBQUtrRCxXQUlUQSxRQUNFWSxNQUFNWixRQUNObEQsS0FBS2tCLE1BQU1xRCxRQUdiQyxjQUFjQyxHQUVQekUsS0FBS3NCLGNBQWNvQixZQUR4QitCLEVBQ3NDLFlBQ0F6RSxLQUFLK0Qsb0JDcUN4QyxNQUFNVyxFQUFNLElBakZuQixNQUNFN0UsWUFBWSxHQUFzQixJQUF0QixRQUFFOEUsRUFBRixRQUFXQyxHQUFXLEVBQ2hDNUUsS0FBSzZFLFNBQVdGLEVBQ2hCM0UsS0FBSzhFLFNBQVdGLEVBR2xCRyxlQUFlQyxHQUNiLE9BQU9BLEVBQUlDLEdBQUtELEVBQUlFLE9BQVNDLFFBQVFDLE9BQVIsaUJBQXlCSixFQUFJSyxTQUc1REMsa0JBQ0UsT0FBT0MsTUFBTSxHQUFELE9BQUl2RixLQUFLNkUsU0FBVCxVQUEyQixDQUNyQ0QsUUFBUzVFLEtBQUs4RSxXQUNiVSxLQUFLeEYsS0FBSytFLGdCQUdmVSxjQUNFLE9BQU9GLE1BQU0sR0FBRCxPQUFJdkYsS0FBSzZFLFNBQVQsYUFBOEIsQ0FDeENELFFBQVM1RSxLQUFLOEUsV0FDYlUsS0FBS3hGLEtBQUsrRSxnQkFHZlcsZUFBZXhCLEVBQU15QixHQUNuQixPQUFPSixNQUFNLEdBQUQsT0FBSXZGLEtBQUs2RSxTQUFULGFBQThCLENBQ3hDZSxPQUFRLFFBQ1JoQixRQUFTNUUsS0FBSzhFLFNBQ2RlLEtBQU1DLEtBQUtDLFVBQVUsQ0FDbkI3QixLQUFNQSxFQUNOeUIsTUFBT0EsTUFFUkgsS0FBS3hGLEtBQUtnRyxrQkFHZkMsV0FBVyxHQUFnQixJQUFoQixLQUFFL0IsRUFBRixLQUFRZ0MsR0FBUSxFQUN6QixPQUFPWCxNQUFNLEdBQUQsT0FBSXZGLEtBQUs2RSxTQUFULFVBQTJCLENBQ3JDZSxPQUFRLE9BQ1JoQixRQUFTNUUsS0FBSzhFLFNBQ2RlLEtBQU1DLEtBQUtDLFVBQVUsQ0FDbkI3QixLQUFNQSxFQUNOZ0MsS0FBTUEsTUFFUFYsS0FBS3hGLEtBQUsrRSxnQkFHZm9CLFNBQVMxRCxHQUNQLE9BQU84QyxNQUFNLEdBQUQsT0FBSXZGLEtBQUs2RSxTQUFULHdCQUFpQ3BDLEdBQU0sQ0FDakRtRCxPQUFRLE1BQ1JoQixRQUFTNUUsS0FBSzhFLFdBQ2JVLEtBQUt4RixLQUFLK0UsZ0JBR2ZxQixXQUFXM0QsR0FDVCxPQUFPOEMsTUFBTSxHQUFELE9BQUl2RixLQUFLNkUsU0FBVCx3QkFBaUNwQyxHQUFNLENBQ2pEbUQsT0FBUSxTQUNSaEIsUUFBUzVFLEtBQUs4RSxXQUNiVSxLQUFLeEYsS0FBSytFLGdCQUdmc0IsYUFBYUgsR0FDWCxPQUFPWCxNQUFNLEdBQUQsT0FBSXZGLEtBQUs2RSxTQUFULG9CQUFxQyxDQUMvQ2UsT0FBUSxRQUNSaEIsUUFBUzVFLEtBQUs4RSxTQUNkZSxLQUFNQyxLQUFLQyxVQUFVLENBQ25CTyxPQUFRSixNQUVUVixLQUFLeEYsS0FBSytFLGdCQUdmd0IsV0FBV0MsR0FDVCxPQUFPakIsTUFBTSxHQUFELE9BQUl2RixLQUFLNkUsU0FBVCxrQkFBMkIyQixHQUFVLENBQy9DWixPQUFRLFNBQ1JoQixRQUFTNUUsS0FBSzhFLFdBQ2JVLE1BQU1SLEdBQ0hBLEVBQUlDLEdBQ0NELEVBQUlFLE9BRU5DLFFBQVFDLE9BQVIsaUJBQXlCSixFQUFJSyxhQUtmLENBQ3pCVixRQUFTLGlEQUNUQyxRQUFTLENBQ1A2QixjQUFlLHVDQUNmLGVBQWdCLHNCQ3JGZEMsRUFBWXJELFNBQVM5QixjQUFjLDBCQUNuQ29GLEVBQVd0RCxTQUFTOUIsY0FBYyx5QkFDbENxRixFQUFxQnZELFNBQVM5QixjQUFjLHNCQUM1Q3NGLEVBQW9CeEQsU0FBUzlCLGNBQWMscUJBQzNDdUYsRUFBV3pELFNBQVM5QixjQUFjLGNBQ2xDd0YsRUFBVTFELFNBQVM5QixjQUFjLGFBQ2pDeUYsRUFBYTNELFNBQVM5QixjQUFjLGdCQUdwQzBGLEVBQWlCNUQsU0FBUzlCLGNBQWMsMEJBRXhDMkYsRUFBYSxDQUNqQjNHLGNBQWUsZUFDZkUsaUJBQWtCLGFBQ2xCRSxxQkFBc0Isa0JBQ3RCRSxvQkFBcUIsMEJBQ3JCRSxnQkFBaUIseUJBQ2pCRSxXQUFZLHdCQ01Sa0csRUFBVyxJQ3ZCakIsTUFDRXRILFlBQVksR0FBdUQsSUFBdkQsaUJBQUV1SCxFQUFGLGdCQUFvQkMsRUFBcEIsZUFBcUNDLEdBQWtCLEVBQ2pFdEgsS0FBS3VILGFBQWVsRSxTQUFTOUIsY0FBYzZGLEdBQzNDcEgsS0FBS3dILFlBQWNuRSxTQUFTOUIsY0FBYzhGLEdBQzFDckgsS0FBS3lILFFBQVVwRSxTQUFTOUIsY0FBYytGLEdBR3hDN0IsY0FDRSxNQUFPLENBQ0x2QixLQUFNbEUsS0FBS3VILGFBQWE3RSxZQUN4QmdGLElBQUsxSCxLQUFLd0gsWUFBWTlFLFlBQ3RCNEQsT0FBUXRHLEtBQUt5SCxRQUFRRSxJQUNyQmxGLEdBQUl6QyxLQUFLNEgsU0FJYkMsWUFBWTNELEVBQU13RCxFQUFLakYsR0FDckJ6QyxLQUFLdUgsYUFBYTdFLFlBQWN3QixFQUNoQ2xFLEtBQUt3SCxZQUFZOUUsWUFBY2dGLEVBQy9CMUgsS0FBSzRILFFBQVVuRixFQUdqQnFGLFVBQVV4QixHQUNSdEcsS0FBS3lILFFBQVFFLElBQU1yQixJREFPLENBQzVCYyxpQkFBa0IsaUJBQ2xCQyxnQkFBaUIsZ0JBQ2pCQyxlQUFnQixxQkFHWlMsRUFBaUIsSUU3QnZCLE1BQ0VsSSxZQUFZLEVBQWNtSSxHQUFtQixJQUFqQyxTQUFFQyxHQUErQixFQUMzQ2pJLEtBQUtrSSxVQUFZRCxFQUNqQmpJLEtBQUttSSxXQUFhOUUsU0FBUzlCLGNBQWN5RyxHQUczQ0ksV0FBV0MsR0FDVHJJLEtBQUttSSxXQUFXRyxPQUFPRCxHQUd6QkUsWUFBWUYsR0FDVnJJLEtBQUttSSxXQUFXSyxRQUFRSCxHQUcxQkksWUFBWUMsR0FDVkEsRUFBTTNHLFNBQVM0RyxJQUNiM0ksS0FBS2tJLFVBQVVTLFFGY25CLENBQ0VWLFNBQVdVLElBQ1RaLEVBQWVLLFdBQVdRLEVBQVdELE1BR3pDLGFBSUlFLEVBQVksSUFBSUMsRUFBYyxDQUNsQ2hHLGNBQWUsa0JBQ2ZlLGNBQWdCUSxJQUNkLE1BQU0wRSxFQUFjNUIsRUFBUzFCLGNBQ3ZCdUQsRUFBYyxDQUFFOUUsS0FBTTZFLEVBQVk3RSxLQUFNLFdBQVk2RSxFQUFZckIsS0FDdEVtQixFQUFVekUsZUFBZTRFLEdBQ3pCSCxFQUFVckUsZUFBYyxHQUN4QkUsRUFBQUEsZUFDa0JMLEVBQUtILEtBQU1HLEVBQUtxRCxLQUMvQmxDLE1BQUssS0FDSjJCLEVBQVNVLFlBQVl4RCxFQUFLSCxLQUFNRyxFQUFLcUQsUUFFdEN1QixNQUFNQyxRQUFRQyxLQUNkQyxTQUFRLEtBQ1BQLEVBQVVyRSxlQUFjLFNBSzFCNkUsRUFBVyxJQUFJUCxFQUFjLENBQ2pDaEcsY0FBZSxpQkFDZmUsY0FBZ0JJLElBQ2RvRixFQUFTN0UsZUFBYyxHQUN2QixNQUFNOEUsRUFBVSxDQUNkcEYsS0FBTUQsRUFBYXNGLE1BQ25CckQsS0FBTWpDLEVBQWEsZUFFckJTLEVBQUFBLFdBQ2M0RSxHQUNYOUQsTUFBTVIsSUFDTCxNQUFNd0UsRUFBV25HLFNBQVM5QixjQUFjLGFBQ2xDa0ksRUFBY2IsRUFBVzVELEdBQy9Cd0UsRUFBU2hCLFFBQVFpQixNQUVsQlIsTUFBTUMsUUFBUUMsS0FDZEMsU0FBUSxLQUNQQyxFQUFTN0UsZUFBYyxTQUt6QmtGLEVBQWEsSUc5RW5CLGNBQTZCOUYsRUFDM0IvRCxZQUFZOEosR0FDVjdGLE1BQU02RixHQUdScEcsS0FBS1csRUFBTWdDLEdBQ1QsTUFBTTBELEVBQVc1SixLQUFLb0QsT0FBTzdCLGNBQWMscUJBQ3JDc0ksRUFBYzdKLEtBQUtvRCxPQUFPN0IsY0FBYyx1QkFDOUN1QyxNQUFNUCxPQUNOcUcsRUFBU0UsSUFBTTVGLEVBQ2YwRixFQUFTakMsSUFBTXpCLEVBQ2YyRCxFQUFZbkgsWUFBY3dCLElIbUVRLG9CQUVoQzZGLEVBQWMsSUloRnBCLGNBQThCbkcsRUFDNUIvRCxZQUFZaUQsRUFBZWUsR0FDekJDLE1BQU1oQixHQUNOOUMsS0FBS2dLLGVBQWlCbkcsRUFDdEI3RCxLQUFLc0IsY0FBZ0J0QixLQUFLb0QsT0FBTzdCLGNBQWMsbUJBQy9DdkIsS0FBSytELGtCQUFvQi9ELEtBQUtzQixjQUFjb0IsWUFHOUN1SCxVQUFVQyxHQUNSbEssS0FBS2dLLGVBQWlCRSxFQUd4QnZHLG9CQUNFM0QsS0FBS29ELE9BQU9SLGlCQUFpQixVQUFXRyxJQUN0Q0EsRUFBRXVCLGlCQUNGdEUsS0FBS2dLLGlCQUNMaEssS0FBS2tELFdBRVBZLE1BQU1ILG9CQUdSYSxjQUFjQyxHQUVQekUsS0FBS3NCLGNBQWNvQixZQUR4QitCLEVBQ3NDLFlBQ0F6RSxLQUFLK0Qsb0JKd0RQLHFCQUVsQ29HLEVBQWMsSUFBSXJCLEVBQWMsQ0FDcENoRyxjQUFlLG9CQUNmZSxjQUFnQlEsSUFDZDhGLEVBQVkzRixlQUFjLEdBQzFCRSxFQUFBQSxhQUNnQkwsRUFBS2lDLFFBRWxCZCxNQUFNUixJQUNMbUMsRUFBU1csVUFBVTlDLEVBQUlzQixXQUV4QjJDLE1BQU1DLFFBQVFDLEtBQ2RDLFNBQVEsS0FDUGUsRUFBWTNGLGVBQWMsU0FNbENxRSxFQUFVbEYsb0JBQ1YwRixFQUFTMUYsb0JBQ1QrRixFQUFXL0Ysb0JBQ1h3RyxFQUFZeEcsb0JBQ1pvRyxFQUFZcEcsb0JBR1osTUFBTXlHLEVBQW9CLElBQUlDLEVBQWNuRCxFQUFZSixHQUN4RHNELEVBQWtCdkgsbUJBRWxCLE1BQU15SCxFQUFtQixJQUFJRCxFQUFjbkQsRUFBWUgsR0FDdkR1RCxFQUFpQnpILG1CQUVqQixNQUFNMEgsRUFBc0IsSUFBSUYsRUFBY25ELEVBQVlGLEdBYTFELFNBQVM0QixFQUFXRCxHQUNsQixNQUFNNkIsRUFBU3JELEVBQVMxQixjQUFjaEQsR0FDaENnSSxFQUFPLElObElmLE1BQ0U1SyxZQUNFd0UsRUFDQXNGLEVBQ0FhLEVBQ0FFLEVBQ0FDLEVBQ0FDLEcsVUF1RVksSUFBTTVLLEtBQUs2SyxNQUFNcEosVUFBVXFKLE9BQU8seUIsRUF0RTlDLHNCLHNCQUFBLEssdURBQUEsSyxLQUNBOUssS0FBSytLLE9BQVMxRyxFQUFLSCxLQUNuQmxFLEtBQUtnTCxPQUFTM0csRUFBSzZCLEtBQ25CbEcsS0FBS2lMLE1BQVE1RyxFQUNickUsS0FBSzRILFFBQVU0QyxFQUNmeEssS0FBS2tMLGNBQWdCdkIsRUFDckIzSixLQUFLbUwsaUJBQW1CVCxFQUN4QjFLLEtBQUtvTCxvQkFBc0JULEVBQzNCM0ssS0FBS3FMLGlCQUFtQlQsRUFDeEI1SyxLQUFLc0wsT0FBU3RMLEtBQUtpTCxNQUFNTSxNQUczQkMsZUFNRSxPQUx3Qm5JLFNBQVM5QixjQUFjdkIsS0FBS2tMLGVBQWVPLFFBRWhFbEssY0FBYyxZQUNkbUssV0FBVSxHQUtmQyxlQUNFM0wsS0FBSzRMLFNBQVc1TCxLQUFLd0wsZUFDckJ4TCxLQUFLNkssTUFBUTdLLEtBQUs0TCxTQUFTckssY0FBYyxrQkFDekN2QixLQUFLNkwsV0FBYTdMLEtBQUs0TCxTQUFTckssY0FBYywwQkFDOUN2QixLQUFLOEwsWUFBYzlMLEtBQUs0TCxTQUFTckssY0FBYyxrQkFDL0N2QixLQUFLK0wsYUFBZS9MLEtBQUs0TCxTQUFTckssY0FBYyx5QkFDaER2QixLQUFLMkMscUJBQ0wsTUFBTXFKLEVBQWVoTSxLQUFLNEwsU0FBU3JLLGNBQWMsbUJBQzNDMEssRUFBbUJqTSxLQUFLNEwsU0FBU3JLLGNBQWMsdUJBVXJELE9BVEF2QixLQUFLa00sZUFDTEYsRUFBYXJFLElBQU0zSCxLQUFLZ0wsT0FDeEJpQixFQUFpQnZKLFlBQWMxQyxLQUFLK0ssT0FDcENpQixFQUFhbEMsSUFBTTlKLEtBQUsrSyxPQUNwQi9LLEtBQUtpTCxNQUFNa0IsTUFBWCxNQUE0Qm5NLEtBQUs0SCxVQUNuQzVILEtBQUs2TCxXQUFXbkksb0JBQW9CLFFBQVMxRCxLQUFLb0wscUJBQ2xEcEwsS0FBSzZMLFdBQVdPLE1BQVEsaUJBR25CcE0sS0FBSzRMLFNBR2RTLGFBQ0VyTSxLQUFLNEwsU0FBUy9KLFNBSWhCcUssZUFDRWxNLEtBQUsrTCxhQUFhckosWUFBYzFDLEtBQUtzTCxPQUFPZ0IsT0FFeEN0TSxLQUFLdU0sVUFDUHZNLEtBQUs4TCxZQUFZckssVUFBVUMsSUFBSSx3QkFFL0IxQixLQUFLOEwsWUFBWXJLLFVBQVVJLE9BQU8sd0JBSXRDMkssWUFBWWpCLEdBQ1Z2TCxLQUFLc0wsT0FBU0MsRUFDZHZMLEtBQUtrTSxlQUdQSyxVQUtFLE9BSmlCdk0sS0FBS3NMLE9BQ25CbUIsS0FBS0MsR0FBU0EsRUFBSSxNQUNsQkMsTUFBTWxLLEdBQU9BLElBQU96QyxLQUFLNEgsVUFPOUJqRixxQkFFRTNDLEtBQUs2SyxNQUFNakksaUJBQWlCLFFBQVM1QyxLQUFLcUwsa0JBRTFDckwsS0FBSzZMLFdBQVdqSixpQkFBaUIsUUFBUzVDLEtBQUtvTCxxQkFFL0NwTCxLQUFLNEwsU0FDRnJLLGNBQWMsbUJBQ2RxQixpQkFBaUIsUUFBUzVDLEtBQUttTCxvQk0yQ2xDeEMsRUFDQSxvQkFDQTZCLEdBQ0EsS0FDRWQsRUFBV25HLEtBQUtvRixFQUFLekUsS0FBTXlFLEVBQUt6QyxTQUVsQyxLQUNFNkQsRUFBWXhHLE9BQ1p3RyxFQUFZRSxXQUFVLEtBQ3BCRixFQUFZdkYsZUFBYyxHQUMxQkUsRUFBQUEsV0FDY2lFLEVBQUksS0FDZm5ELE1BQUssS0FDSmlGLEVBQUs0QixnQkFFTnBELE1BQU1DLFFBQVFDLEtBQ2RDLFNBQVEsS0FDUFcsRUFBWXZGLGVBQWMsWUFJbEMsS0FDRWlHLEVBQUs4QixVQUNEN0gsRUFBQUEsV0FDY2lFLEVBQUksS0FDZm5ELE1BQU1SLElBQ0x5RixFQUFLK0IsWUFBWXhILEVBQUl1RyxVQUV0QnRDLE1BQU1DLFFBQVFDLEtBQ2pCekUsRUFBQUEsU0FDWWlFLEVBQUksS0FDYm5ELE1BQU1SLElBQ0x5RixFQUFLK0IsWUFBWXhILEVBQUl1RyxVQUV0QnRDLE1BQU1DLFFBQVFDLFFBS3pCLE9BRG9Cc0IsRUFBS2tCLGVBckQzQnBCLEVBQW9CMUgsbUJBR3BCc0MsUUFBUXlILElBQUksQ0FBQ2xJLEVBQUllLGNBQWVmLEVBQUlZLG9CQUNqQ0UsTUFBSyxJQUEyQixJQUF6QnFILEVBQVVDLEdBQWUsRUFDL0IzRixFQUFTVSxZQUFZZ0YsRUFBUzNJLEtBQU0ySSxFQUFTbEgsTUFBT2tILEVBQVEsS0FDNUQxRixFQUFTVyxVQUFVK0UsRUFBU3ZHLFFBRTVCeUIsRUFBZVUsWUFBWXFFLE1BRTVCN0QsTUFBTUMsUUFBUUMsS0FnRGpCdkMsRUFBbUJoRSxpQkFBaUIsU0FBUyxXQUMzQ2lHLEVBQVV0RixPQUNWLE1BQU13SixFQUFPNUYsRUFBUzFCLGNBQ3RCaUIsRUFBVXZDLE1BQVE0SSxFQUFLN0ksS0FDdkJ5QyxFQUFTeEMsTUFBUTRJLEVBQUtyRixJQUV0QjBDLEVBQWtCdEksY0FDbEJzSSxFQUFrQnhJLGtCQUdwQmlGLEVBQWtCakUsaUJBQWlCLFNBQVMsV0FDMUN5RyxFQUFTOUYsT0FDVCtHLEVBQWlCOUksZ0JBQ2pCOEksRUFBaUJ4SSxpQkFHbkJtRixFQUFlckUsaUJBQWlCLFNBQVMsS0FDdkN1SCxFQUFZNUcsT0FDWmdILEVBQW9CL0ksZ0JBQ3BCK0ksRUFBb0J6SSxpQiIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvcGFnZS9pbmRleC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhTdWJtaXQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBkYXRhLFxyXG4gICAgY2FyZFNlbGVjdG9yLFxyXG4gICAgdXNlcklkLFxyXG4gICAgaGFuZGxlQ2FyZENsaWNrLFxyXG4gICAgaGFuZGxlRGVsZXRlQnV0dG9uLFxyXG4gICAgaGFuZGxlTGlrZUNsaWNrXHJcbiAgKSB7XHJcbiAgICB0aGlzLl90aXRsZSA9IGRhdGEubmFtZTtcclxuICAgIHRoaXMuX2ltYWdlID0gZGF0YS5saW5rO1xyXG4gICAgdGhpcy5fZGF0YSA9IGRhdGE7XHJcbiAgICB0aGlzLl91c2VySWQgPSB1c2VySWQ7XHJcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XHJcbiAgICB0aGlzLl9oYW5kbGVEZWxldGVCdXR0b24gPSBoYW5kbGVEZWxldGVCdXR0b247XHJcbiAgICB0aGlzLl9oYW5kbGVMaWtlQ2xpY2sgPSBoYW5kbGVMaWtlQ2xpY2s7XHJcbiAgICB0aGlzLl9saWtlcyA9IHRoaXMuX2RhdGEubGlrZXM7XHJcbiAgfVxyXG5cclxuICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICBjb25zdCB0ZW1wbGF0ZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcikuY29udGVudDtcclxuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gdGVtcGxhdGVFbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRcIilcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuXHJcbiAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBnZW5lcmF0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuICAgIHRoaXMuX2xpa2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fbGlrZVwiKTtcclxuICAgIHRoaXMuX2RlbGV0ZUJ0biA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19kZWxldGUtaWNvbiBcIik7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2xpa2VcIik7IC8vIG5ldyB2XHJcbiAgICB0aGlzLl9saWtlQ291bnRlciA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19saWtlX251bWJlclwiKTsgLy8gbmV3IHZcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICBjb25zdCBpbWFnZUVsZW1lbnQgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9faW1hZ2VcIik7XHJcbiAgICBjb25zdCBwYXJhZ3JhcGhFbGVtZW50ID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX3BhcmFncmFwaFwiKTtcclxuICAgIHRoaXMuX3JlbmRlckxpa2VzKCk7XHJcbiAgICBpbWFnZUVsZW1lbnQuc3JjID0gdGhpcy5faW1hZ2U7XHJcbiAgICBwYXJhZ3JhcGhFbGVtZW50LnRleHRDb250ZW50ID0gdGhpcy5fdGl0bGU7XHJcbiAgICBpbWFnZUVsZW1lbnQuYWx0ID0gdGhpcy5fdGl0bGU7XHJcbiAgICBpZiAodGhpcy5fZGF0YS5vd25lcltcIl9pZFwiXSAhPT0gdGhpcy5fdXNlcklkKSB7XHJcbiAgICAgIHRoaXMuX2RlbGV0ZUJ0bi5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlRGVsZXRlQnV0dG9uKTtcclxuICAgICAgdGhpcy5fZGVsZXRlQnRuLnN0eWxlID0gXCJkaXNwbGF5OiBub25lXCI7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICByZW1vdmVDYXJkKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcclxuICB9XHJcblxyXG4gIC8vIG5ldyB2XHJcbiAgX3JlbmRlckxpa2VzKCkge1xyXG4gICAgdGhpcy5fbGlrZUNvdW50ZXIudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlcy5sZW5ndGg7XHJcblxyXG4gICAgaWYgKHRoaXMuaXNMaWtlZCgpKSB7XHJcbiAgICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LmFkZChcImVsZW1lbnRfX2xpa2VfYWN0aXZlXCIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwiZWxlbWVudF9fbGlrZV9hY3RpdmVcIik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICB1cGRhdGVMaWtlcyhsaWtlcykge1xyXG4gICAgdGhpcy5fbGlrZXMgPSBsaWtlcztcclxuICAgIHRoaXMuX3JlbmRlckxpa2VzKCk7XHJcbiAgfVxyXG5cclxuICBpc0xpa2VkKCkge1xyXG4gICAgY29uc3QgdXNlckxpa2UgPSB0aGlzLl9saWtlc1xyXG4gICAgICAubWFwKCh1c2VyKSA9PiB1c2VyW1wiX2lkXCJdKVxyXG4gICAgICAuZmluZCgoaWQpID0+IGlkID09PSB0aGlzLl91c2VySWQpO1xyXG5cclxuICAgIHJldHVybiB1c2VyTGlrZTtcclxuICB9XHJcblxyXG4gIF90b2dnbGVMaWtlID0gKCkgPT4gdGhpcy5fbGlrZS5jbGFzc0xpc3QudG9nZ2xlKFwiZWxlbWVudF9fbGlrZV9hY3RpdmVcIik7XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIC8vICB0aGlzLl9saWtlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl90b2dnbGVMaWtlKTtcclxuICAgIHRoaXMuX2xpa2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZUxpa2VDbGljayk7XHJcblxyXG4gICAgdGhpcy5fZGVsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVEZWxldGVCdXR0b24pO1xyXG5cclxuICAgIHRoaXMuX2VsZW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9faW1hZ2VcIilcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVDYXJkQ2xpY2spO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQ2FyZDtcclxuIiwiY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3Iob2JqLCBmb3JtKSB7XHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gb2JqLmlucHV0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9maWVsZHNldFNlbGVjdG9yID0gb2JqLmZpZWxkc2V0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IG9iai5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBvYmouaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IG9iai5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gb2JqLmVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9mb3JtID0gZm9ybTtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20oXHJcbiAgICAgIHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKVxyXG4gICAgKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBfaGFzSW52YWxpZElucHV0ID0gKCkgPT4ge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICBkaXNhYmxlQnV0dG9uKCkge1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlQnV0dG9uKCkge1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuICB9XHJcblxyXG4gIHJlc2V0RXJyb3JzKCl7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpPT57XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XHJcbiAgICAgIHRoaXMuZGlzYWJsZUJ1dHRvbigpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5lbmFibGVCdXR0b24oKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgRm9ybVZhbGlkYXRvcjtcclxuIiwiY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2Nsb3NlQnV0dG9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cC1ib3hfX2Nsb3NlLWJ0blwiKTtcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKFwicG9wdXAtYm94X29wZW5lZFwiKTtcclxuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgdGhpcy5faGFuZGxlQ2xpY2tDbG9zZSk7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cC1ib3hfb3BlbmVkXCIpO1xyXG4gICAgdGhpcy5fcG9wdXAucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLl9oYW5kbGVDbGlja0Nsb3NlKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVDbGlja0Nsb3NlID0gKGUpID0+IHtcclxuICAgIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3B1cC1ib3hcIikpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIF9oYW5kbGVFc2NDbG9zZSA9IChlKSA9PiB7XHJcbiAgICBpZiAoZS5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuY2xvc2UoKSk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBQb3B1cDtcclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwXCI7XHJcblxyXG5jbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3Rvciwgc3VibWl0SGFuZGxlciB9KSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuc3VibWl0SGFuZGxlciA9IHN1Ym1pdEhhbmRsZXI7XHJcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5mb3JtXCIpO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZm9ybV9faW5wdXRcIikpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5mb3JtX19zYXZlLWJ0blwiKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblRleHQgPSB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQ7XHJcbiAgfVxyXG5cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICBjb25zdCBpbnB1dGVWYWx1ZXMgPSB7fTtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICBpbnB1dGVWYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBpbnB1dGVWYWx1ZXM7XHJcbiAgfVxyXG5cclxuICBzZXRJbnB1dFZhbHVlcyhkYXRhKSB7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgaW5wdXQudmFsdWUgPSBkYXRhW2lucHV0Lm5hbWVdO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLnN1Ym1pdEhhbmRsZXIodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgdGhpcy5fZm9ybS5yZXNldCgpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyTG9hZGluZyhpc0xvYWRpbmcpIHtcclxuICAgIGlzTG9hZGluZ1xyXG4gICAgICA/ICh0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBcIlNhdmluZy4uLlwiKVxyXG4gICAgICA6ICh0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSB0aGlzLl9zdWJtaXRCdXR0b25UZXh0KTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFBvcHVwV2l0aEZvcm07XHJcbiIsImNsYXNzIEFwaSB7XHJcbiAgY29uc3RydWN0b3IoeyBiYXNlVXJsLCBoZWFkZXJzIH0pIHtcclxuICAgIHRoaXMuX2Jhc2VVcmwgPSBiYXNlVXJsO1xyXG4gICAgdGhpcy5faGVhZGVycyA9IGhlYWRlcnM7XHJcbiAgfVxyXG5cclxuICBfZmV0Y2hSZXNwb25zZShyZXMpIHtcclxuICAgIHJldHVybiByZXMub2sgPyByZXMuanNvbigpIDogUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgfVxyXG5cclxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKHRoaXMuX2ZldGNoUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKHRoaXMuX2ZldGNoUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlVXNlckluZm8obmFtZSwgYWJvdXQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiBuYW1lLFxyXG4gICAgICAgIGFib3V0OiBhYm91dCxcclxuICAgICAgfSksXHJcbiAgICB9KS50aGVuKHRoaXMuX3Byb2Nlc3NSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICB1cGxvYWRDYXJkKHsgbmFtZSwgbGluayB9KSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiBuYW1lLFxyXG4gICAgICAgIGxpbms6IGxpbmssXHJcbiAgICAgIH0pLFxyXG4gICAgfSkudGhlbih0aGlzLl9mZXRjaFJlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIGxpa2VDYXJkKGlkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvbGlrZXMvJHtpZH1gLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4odGhpcy5fZmV0Y2hSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICB1bkxpa2VDYXJkKGlkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvbGlrZXMvJHtpZH1gLCB7XHJcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4odGhpcy5fZmV0Y2hSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICB1cGRhdGVBdmF0YXIobGluaykge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBhdmF0YXI6IGxpbmssXHJcbiAgICAgIH0pLFxyXG4gICAgfSkudGhlbih0aGlzLl9mZXRjaFJlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIGRlbGV0ZUNhcmQoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9YCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHtcclxuICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGFwaSA9IG5ldyBBcGkoe1xyXG4gIGJhc2VVcmw6IGBodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC0zLWVuYCxcclxuICBoZWFkZXJzOiB7XHJcbiAgICBhdXRob3JpemF0aW9uOiBcIjBiNjliZjE5LTQyZDEtNGJmOC05ZmYxLTk2NzVlZDc4ODc2N1wiLFxyXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgfSxcclxufSk7XHJcbiIsImNvbnN0IG5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9faW5wdXRfdHlwZV9uYW1lXCIpO1xyXG5jb25zdCBqb2JJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9faW5wdXRfdHlwZV9qb2JcIik7XHJcbmNvbnN0IG9wZW5Gb3JtRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idG5cIik7XHJcbmNvbnN0IG9wZW5Gb3JtQWRkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnRuXCIpO1xyXG5jb25zdCBlZGl0Rm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybS1lZGl0XCIpO1xyXG5jb25zdCBhZGRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtLWFkZFwiKTtcclxuY29uc3QgYXZhdGFyRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybS1hdmF0YXJcIik7XHJcbmNvbnN0IHRva2VuID0gXCIwYjY5YmYxOS00MmQxLTRiZjgtOWZmMS05Njc1ZWQ3ODg3NjdcIjtcclxuY29uc3QgZ3JvdXBJRCA9IFwiY29ob3J0LTMtZW5cIjtcclxuY29uc3Qgb3BlbkVkaXRBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtcGljdHVyZVwiKTtcclxuXHJcbmNvbnN0IGZvcm1PYmplY3QgPSB7XHJcbiAgaW5wdXRTZWxlY3RvcjogXCIuZm9ybV9faW5wdXRcIixcclxuICBmaWVsZHNldFNlbGVjdG9yOiBcIi5mb3JtX19zZXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIuZm9ybV9fc2F2ZS1idG5cIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcImZvcm1fX3NhdmUtYnRuX2Rpc2FibGVkXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcImZvcm1fX2lucHV0X3R5cGVfZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcInBvcHVwX19lcnJvcl92aXNpYmxlXCIsXHJcbn07XHJcblxyXG5leHBvcnQge1xyXG4gIG5hbWVJbnB1dCxcclxuICBqb2JJbnB1dCxcclxuICBvcGVuRm9ybUVkaXRCdXR0b24sXHJcbiAgb3BlbkZvcm1BZGRCdXR0b24sXHJcbiAgZWRpdEZvcm0sXHJcbiAgYWRkRm9ybSxcclxuICBhdmF0YXJGb3JtLFxyXG4gIGZvcm1PYmplY3QsXHJcbiAgdG9rZW4sXHJcbiAgZ3JvdXBJRCxcclxuICBvcGVuRWRpdEF2YXRhcixcclxufTtcclxuIiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhTdWJtaXQgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoU3VibWl0LmpzXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCB7IGFwaSB9IGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiO1xyXG5pbXBvcnQge1xyXG4gIG5hbWVJbnB1dCxcclxuICBqb2JJbnB1dCxcclxuICBvcGVuRm9ybUVkaXRCdXR0b24sXHJcbiAgb3BlbkZvcm1BZGRCdXR0b24sXHJcbiAgZWRpdEZvcm0sXHJcbiAgYWRkRm9ybSxcclxuICBhdmF0YXJGb3JtLFxyXG4gIGZvcm1PYmplY3QsXHJcbiAgb3BlbkVkaXRBdmF0YXIsXHJcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5cclxuLy8gY2xhc3MgaW5zdGFuY2VzXHJcblxyXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XHJcbiAgdXNlck5hbWVTZWxlY3RvcjogXCIucHJvZmlsZV9fbmFtZVwiLFxyXG4gIHVzZXJKb2JTZWxlY3RvcjogXCIucHJvZmlsZV9fam9iXCIsXHJcbiAgYXZhdGFyU2VsZWN0b3I6IFwiLnByb2ZpbGVfX2F2YXRhclwiLFxyXG59KTtcclxuXHJcbmNvbnN0IHNlcnZlckNhcmRMaXN0ID0gbmV3IFNlY3Rpb24oXHJcbiAge1xyXG4gICAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XHJcbiAgICAgIHNlcnZlckNhcmRMaXN0LmFwcGVuZEl0ZW0oY3JlYXRlQ2FyZChpdGVtKSk7XHJcbiAgICB9LFxyXG4gIH0sXHJcbiAgXCIuZWxlbWVudHNcIlxyXG4pO1xyXG5cclxuLy8gcG9wdXBzXHJcbmNvbnN0IGVkaXRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcclxuICBwb3B1cFNlbGVjdG9yOiBcIi5wb3B1cC1ib3hfZWRpdFwiLFxyXG4gIHN1Ym1pdEhhbmRsZXI6IChkYXRhKSA9PiB7XHJcbiAgICBjb25zdCBpbml0aWFsSW5mbyA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XHJcbiAgICBjb25zdCBpbml0aWFsRGF0YSA9IHsgbmFtZTogaW5pdGlhbEluZm8ubmFtZSwgXCJhYm91dC1tZVwiOiBpbml0aWFsSW5mby5qb2IgfTtcclxuICAgIGVkaXRQb3B1cC5zZXRJbnB1dFZhbHVlcyhpbml0aWFsRGF0YSk7XHJcbiAgICBlZGl0UG9wdXAucmVuZGVyTG9hZGluZyh0cnVlKTtcclxuICAgIGFwaVxyXG4gICAgICAudXBkYXRlVXNlckluZm8oZGF0YS5uYW1lLCBkYXRhLmpvYilcclxuICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKGRhdGEubmFtZSwgZGF0YS5qb2IpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goY29uc29sZS5sb2cpXHJcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICBlZGl0UG9wdXAucmVuZGVyTG9hZGluZyhmYWxzZSk7XHJcbiAgICAgIH0pO1xyXG4gIH0sXHJcbn0pO1xyXG5cclxuY29uc3QgYWRkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XHJcbiAgcG9wdXBTZWxlY3RvcjogXCIucG9wdXAtYm94X2FkZFwiLFxyXG4gIHN1Ym1pdEhhbmRsZXI6IChpbnB1dGVWYWx1ZXMpID0+IHtcclxuICAgIGFkZFBvcHVwLnJlbmRlckxvYWRpbmcodHJ1ZSk7XHJcbiAgICBjb25zdCBuZXdDYXJkID0ge1xyXG4gICAgICBuYW1lOiBpbnB1dGVWYWx1ZXMudGl0bGUsXHJcbiAgICAgIGxpbms6IGlucHV0ZVZhbHVlc1tcImltYWdlLWxpbmtcIl0sXHJcbiAgICB9O1xyXG4gICAgYXBpXHJcbiAgICAgIC51cGxvYWRDYXJkKG5ld0NhcmQpXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICBjb25zdCBjYXJkTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNcIik7XHJcbiAgICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjcmVhdGVDYXJkKHJlcyk7XHJcbiAgICAgICAgY2FyZExpc3QucHJlcGVuZChjYXJkRWxlbWVudCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaChjb25zb2xlLmxvZylcclxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgIGFkZFBvcHVwLnJlbmRlckxvYWRpbmcoZmFsc2UpO1xyXG4gICAgICB9KTtcclxuICB9LFxyXG59KTtcclxuXHJcbmNvbnN0IGltYWdlUG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIucG9wdXAtYm94X2ltYWdlXCIpO1xyXG5cclxuY29uc3QgZGVsZXRlUG9wdXAgPSBuZXcgUG9wdXBXaXRoU3VibWl0KFwiLnBvcHVwLWJveF9kZWxldGVcIik7XHJcblxyXG5jb25zdCBhdmF0YXJQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcclxuICBwb3B1cFNlbGVjdG9yOiBcIi5wb3B1cC1ib3hfYXZhdGFyXCIsXHJcbiAgc3VibWl0SGFuZGxlcjogKGRhdGEpID0+IHtcclxuICAgIGF2YXRhclBvcHVwLnJlbmRlckxvYWRpbmcodHJ1ZSk7XHJcbiAgICBhcGlcclxuICAgICAgLnVwZGF0ZUF2YXRhcihkYXRhLmF2YXRhcilcclxuXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICB1c2VySW5mby5zZXRBdmF0YXIocmVzLmF2YXRhcik7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaChjb25zb2xlLmxvZylcclxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgIGF2YXRhclBvcHVwLnJlbmRlckxvYWRpbmcoZmFsc2UpO1xyXG4gICAgICB9KTtcclxuICB9LFxyXG59KTtcclxuXHJcbi8vIHNldCBldmVudCBsaXN0ZXJuZXJzXHJcbmVkaXRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5hZGRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5pbWFnZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbmF2YXRhclBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbmRlbGV0ZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vLyBlbmFibGUgZm9ybSB2YWxpZGF0aW9uc1xyXG5jb25zdCBlZGl0Rm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGZvcm1PYmplY3QsIGVkaXRGb3JtKTtcclxuZWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuY29uc3QgYWRkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGZvcm1PYmplY3QsIGFkZEZvcm0pO1xyXG5hZGRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbmNvbnN0IGF2YXRhckZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihmb3JtT2JqZWN0LCBhdmF0YXJGb3JtKTtcclxuYXZhdGFyRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG4vLyBBUElcclxuUHJvbWlzZS5hbGwoW2FwaS5nZXRVc2VySW5mbygpLCBhcGkuZ2V0SW5pdGlhbENhcmRzKCldKVxyXG4gIC50aGVuKChbdXNlckRhdGEsIGNhcmRzRGF0YV0pID0+IHtcclxuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHVzZXJEYXRhLm5hbWUsIHVzZXJEYXRhLmFib3V0LCB1c2VyRGF0YVtcIl9pZFwiXSk7XHJcbiAgICB1c2VySW5mby5zZXRBdmF0YXIodXNlckRhdGEuYXZhdGFyKTtcclxuXHJcbiAgICBzZXJ2ZXJDYXJkTGlzdC5yZW5kZXJJdGVtcyhjYXJkc0RhdGEpO1xyXG4gIH0pXHJcbiAgLmNhdGNoKGNvbnNvbGUubG9nKTtcclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoaXRlbSkge1xyXG4gIGNvbnN0IHVzZXJJZCA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCkuaWQ7XHJcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxyXG4gICAgaXRlbSxcclxuICAgIFwiI3RlbXBsYXRlLWVsZW1lbnRcIixcclxuICAgIHVzZXJJZCxcclxuICAgICgpID0+IHtcclxuICAgICAgaW1hZ2VQb3B1cC5vcGVuKGl0ZW0ubmFtZSwgaXRlbS5saW5rKTtcclxuICAgIH0sXHJcbiAgICAoKSA9PiB7XHJcbiAgICAgIGRlbGV0ZVBvcHVwLm9wZW4oKTtcclxuICAgICAgZGVsZXRlUG9wdXAuc2V0QWN0aW9uKCgpID0+IHtcclxuICAgICAgICBkZWxldGVQb3B1cC5yZW5kZXJMb2FkaW5nKHRydWUpO1xyXG4gICAgICAgIGFwaVxyXG4gICAgICAgICAgLmRlbGV0ZUNhcmQoaXRlbVtcIl9pZFwiXSlcclxuICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgY2FyZC5yZW1vdmVDYXJkKCk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLmNhdGNoKGNvbnNvbGUubG9nKVxyXG4gICAgICAgICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgICAgICBkZWxldGVQb3B1cC5yZW5kZXJMb2FkaW5nKGZhbHNlKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICAgIH0sXHJcbiAgICAoKSA9PiB7XHJcbiAgICAgIGNhcmQuaXNMaWtlZCgpXHJcbiAgICAgICAgPyBhcGlcclxuICAgICAgICAgICAgLnVuTGlrZUNhcmQoaXRlbVtcIl9pZFwiXSlcclxuICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgICAgIGNhcmQudXBkYXRlTGlrZXMocmVzLmxpa2VzKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKGNvbnNvbGUubG9nKVxyXG4gICAgICAgIDogYXBpXHJcbiAgICAgICAgICAgIC5saWtlQ2FyZChpdGVtW1wiX2lkXCJdKVxyXG4gICAgICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICAgICAgY2FyZC51cGRhdGVMaWtlcyhyZXMubGlrZXMpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goY29uc29sZS5sb2cpO1xyXG4gICAgfVxyXG4gICk7XHJcblxyXG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcclxuICByZXR1cm4gY2FyZEVsZW1lbnQ7XHJcbn1cclxuXHJcbi8vIGFkZCBidXR0b24gbGlzdGVybmVyc1xyXG5vcGVuRm9ybUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICBlZGl0UG9wdXAub3BlbigpO1xyXG4gIGNvbnN0IGluZm8gPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xyXG4gIG5hbWVJbnB1dC52YWx1ZSA9IGluZm8ubmFtZTtcclxuICBqb2JJbnB1dC52YWx1ZSA9IGluZm8uam9iO1xyXG5cclxuICBlZGl0Rm9ybVZhbGlkYXRvci5yZXNldEVycm9ycygpO1xyXG4gIGVkaXRGb3JtVmFsaWRhdG9yLmVuYWJsZUJ1dHRvbigpO1xyXG59KTtcclxuXHJcbm9wZW5Gb3JtQWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgYWRkUG9wdXAub3BlbigpO1xyXG4gIGFkZEZvcm1WYWxpZGF0b3IuZGlzYWJsZUJ1dHRvbigpO1xyXG4gIGFkZEZvcm1WYWxpZGF0b3IucmVzZXRFcnJvcnMoKTtcclxufSk7XHJcblxyXG5vcGVuRWRpdEF2YXRhci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGF2YXRhclBvcHVwLm9wZW4oKTtcclxuICBhdmF0YXJGb3JtVmFsaWRhdG9yLmRpc2FibGVCdXR0b24oKTtcclxuICBhdmF0YXJGb3JtVmFsaWRhdG9yLnJlc2V0RXJyb3JzKCk7XHJcbn0pO1xyXG4iLCJjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IoeyB1c2VyTmFtZVNlbGVjdG9yLCB1c2VySm9iU2VsZWN0b3IsIGF2YXRhclNlbGVjdG9yIH0pIHtcclxuICAgIHRoaXMuX3Byb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VyTmFtZVNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3Byb2ZpbGVKb2IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHVzZXJKb2JTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9hdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGF2YXRhclNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbmFtZTogdGhpcy5fcHJvZmlsZU5hbWUudGV4dENvbnRlbnQsXHJcbiAgICAgIGpvYjogdGhpcy5fcHJvZmlsZUpvYi50ZXh0Q29udGVudCxcclxuICAgICAgYXZhdGFyOiB0aGlzLl9hdmF0YXIuc3JjLFxyXG4gICAgICBpZDogdGhpcy5fdXNlcklkLFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKG5hbWUsIGpvYiwgaWQpIHtcclxuICAgIHRoaXMuX3Byb2ZpbGVOYW1lLnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgIHRoaXMuX3Byb2ZpbGVKb2IudGV4dENvbnRlbnQgPSBqb2I7XHJcbiAgICB0aGlzLl91c2VySWQgPSBpZDtcclxuICB9XHJcblxyXG4gIHNldEF2YXRhcihhdmF0YXIpIHtcclxuICAgIHRoaXMuX2F2YXRhci5zcmMgPSBhdmF0YXI7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBVc2VySW5mbztcclxuIiwiY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgYXBwZW5kSXRlbShlbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIuYXBwZW5kKGVsZW1lbnQpO1xyXG4gIH1cclxuXHJcbiAgcHJlcGVuZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcyhpdGVtcykge1xyXG4gICAgaXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgU2VjdGlvbjtcclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwXCI7XHJcblxyXG5jbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3RvcihjYXJkU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKGNhcmRTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBvcGVuKG5hbWUsIGxpbmspIHtcclxuICAgIGNvbnN0IG1vZGFsSW1nID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cC1ib3hfX2ltYWdlXCIpO1xyXG4gICAgY29uc3QgY2FwdGlvblRleHQgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwLWJveF9fY2FwdGlvblwiKTtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICAgIG1vZGFsSW1nLmFsdCA9IG5hbWU7XHJcbiAgICBtb2RhbEltZy5zcmMgPSBsaW5rO1xyXG4gICAgY2FwdGlvblRleHQudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgUG9wdXBXaXRoSW1hZ2U7XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cFwiO1xyXG5cclxuY2xhc3MgUG9wdXBXaXRoU3VibWl0IGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIHN1Ym1pdEhhbmRsZXIpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fc3VibWl0SGFuZGxlciA9IHN1Ym1pdEhhbmRsZXI7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX3NhdmUtYnRuXCIpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uVGV4dCA9IHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudDtcclxuICB9XHJcblxyXG4gIHNldEFjdGlvbihhY3Rpb24pIHtcclxuICAgIHRoaXMuX3N1Ym1pdEhhbmRsZXIgPSBhY3Rpb247XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9zdWJtaXRIYW5kbGVyKCk7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH0pO1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcblxyXG4gIHJlbmRlckxvYWRpbmcoaXNMb2FkaW5nKSB7XHJcbiAgICBpc0xvYWRpbmdcclxuICAgICAgPyAodGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gXCJTYXZpbmcuLi5cIilcclxuICAgICAgOiAodGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gdGhpcy5fc3VibWl0QnV0dG9uVGV4dCk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBQb3B1cFdpdGhTdWJtaXQ7XHJcbiJdLCJuYW1lcyI6WyJjb25zdHJ1Y3RvciIsIm9iaiIsImZvcm0iLCJ0aGlzIiwiX2lucHV0TGlzdCIsInNvbWUiLCJpbnB1dEVsZW1lbnQiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX2ZpZWxkc2V0U2VsZWN0b3IiLCJmaWVsZHNldFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2Zvcm0iLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiX3N1Ym1pdEJ1dHRvbiIsInF1ZXJ5U2VsZWN0b3IiLCJkaXNhYmxlQnV0dG9uIiwiY2xhc3NMaXN0IiwiYWRkIiwiZGlzYWJsZWQiLCJlbmFibGVCdXR0b24iLCJyZW1vdmUiLCJyZXNldEVycm9ycyIsImZvckVhY2giLCJpbnB1dCIsIl9oaWRlSW5wdXRFcnJvciIsIl90b2dnbGVCdXR0b25TdGF0ZSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiX3Nob3dJbnB1dEVycm9yIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJlcnJvck1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJpZCIsInRleHRDb250ZW50IiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiYWRkRXZlbnRMaXN0ZW5lciIsImVuYWJsZVZhbGlkYXRpb24iLCJwb3B1cFNlbGVjdG9yIiwiZSIsInRhcmdldCIsImNvbnRhaW5zIiwiY2xvc2UiLCJrZXkiLCJfcG9wdXAiLCJkb2N1bWVudCIsIl9jbG9zZUJ1dHRvbiIsIm9wZW4iLCJfaGFuZGxlQ2xpY2tDbG9zZSIsIl9oYW5kbGVFc2NDbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJzZXRFdmVudExpc3RlbmVycyIsIlBvcHVwIiwic3VibWl0SGFuZGxlciIsInN1cGVyIiwiX3N1Ym1pdEJ1dHRvblRleHQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJpbnB1dGVWYWx1ZXMiLCJuYW1lIiwidmFsdWUiLCJzZXRJbnB1dFZhbHVlcyIsImRhdGEiLCJwcmV2ZW50RGVmYXVsdCIsInJlc2V0IiwicmVuZGVyTG9hZGluZyIsImlzTG9hZGluZyIsImFwaSIsImJhc2VVcmwiLCJoZWFkZXJzIiwiX2Jhc2VVcmwiLCJfaGVhZGVycyIsIl9mZXRjaFJlc3BvbnNlIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImdldEluaXRpYWxDYXJkcyIsImZldGNoIiwidGhlbiIsImdldFVzZXJJbmZvIiwidXBkYXRlVXNlckluZm8iLCJhYm91dCIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiX3Byb2Nlc3NSZXNwb25zZSIsInVwbG9hZENhcmQiLCJsaW5rIiwibGlrZUNhcmQiLCJ1bkxpa2VDYXJkIiwidXBkYXRlQXZhdGFyIiwiYXZhdGFyIiwiZGVsZXRlQ2FyZCIsImNhcmRJZCIsImF1dGhvcml6YXRpb24iLCJuYW1lSW5wdXQiLCJqb2JJbnB1dCIsIm9wZW5Gb3JtRWRpdEJ1dHRvbiIsIm9wZW5Gb3JtQWRkQnV0dG9uIiwiZWRpdEZvcm0iLCJhZGRGb3JtIiwiYXZhdGFyRm9ybSIsIm9wZW5FZGl0QXZhdGFyIiwiZm9ybU9iamVjdCIsInVzZXJJbmZvIiwidXNlck5hbWVTZWxlY3RvciIsInVzZXJKb2JTZWxlY3RvciIsImF2YXRhclNlbGVjdG9yIiwiX3Byb2ZpbGVOYW1lIiwiX3Byb2ZpbGVKb2IiLCJfYXZhdGFyIiwiam9iIiwic3JjIiwiX3VzZXJJZCIsInNldFVzZXJJbmZvIiwic2V0QXZhdGFyIiwic2VydmVyQ2FyZExpc3QiLCJjb250YWluZXJTZWxlY3RvciIsInJlbmRlcmVyIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsImFwcGVuZEl0ZW0iLCJlbGVtZW50IiwiYXBwZW5kIiwicHJlcGVuZEl0ZW0iLCJwcmVwZW5kIiwicmVuZGVySXRlbXMiLCJpdGVtcyIsIml0ZW0iLCJjcmVhdGVDYXJkIiwiZWRpdFBvcHVwIiwiUG9wdXBXaXRoRm9ybSIsImluaXRpYWxJbmZvIiwiaW5pdGlhbERhdGEiLCJjYXRjaCIsImNvbnNvbGUiLCJsb2ciLCJmaW5hbGx5IiwiYWRkUG9wdXAiLCJuZXdDYXJkIiwidGl0bGUiLCJjYXJkTGlzdCIsImNhcmRFbGVtZW50IiwiaW1hZ2VQb3B1cCIsImNhcmRTZWxlY3RvciIsIm1vZGFsSW1nIiwiY2FwdGlvblRleHQiLCJhbHQiLCJkZWxldGVQb3B1cCIsIl9zdWJtaXRIYW5kbGVyIiwic2V0QWN0aW9uIiwiYWN0aW9uIiwiYXZhdGFyUG9wdXAiLCJlZGl0Rm9ybVZhbGlkYXRvciIsIkZvcm1WYWxpZGF0b3IiLCJhZGRGb3JtVmFsaWRhdG9yIiwiYXZhdGFyRm9ybVZhbGlkYXRvciIsInVzZXJJZCIsImNhcmQiLCJoYW5kbGVDYXJkQ2xpY2siLCJoYW5kbGVEZWxldGVCdXR0b24iLCJoYW5kbGVMaWtlQ2xpY2siLCJfbGlrZSIsInRvZ2dsZSIsIl90aXRsZSIsIl9pbWFnZSIsIl9kYXRhIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfaGFuZGxlRGVsZXRlQnV0dG9uIiwiX2hhbmRsZUxpa2VDbGljayIsIl9saWtlcyIsImxpa2VzIiwiX2dldFRlbXBsYXRlIiwiY29udGVudCIsImNsb25lTm9kZSIsImdlbmVyYXRlQ2FyZCIsIl9lbGVtZW50IiwiX2RlbGV0ZUJ0biIsIl9saWtlQnV0dG9uIiwiX2xpa2VDb3VudGVyIiwiaW1hZ2VFbGVtZW50IiwicGFyYWdyYXBoRWxlbWVudCIsIl9yZW5kZXJMaWtlcyIsIm93bmVyIiwic3R5bGUiLCJyZW1vdmVDYXJkIiwibGVuZ3RoIiwiaXNMaWtlZCIsInVwZGF0ZUxpa2VzIiwibWFwIiwidXNlciIsImZpbmQiLCJhbGwiLCJ1c2VyRGF0YSIsImNhcmRzRGF0YSIsImluZm8iXSwic291cmNlUm9vdCI6IiJ9